{% extends "layout.html" %}
{% block content %}
<div class="container">
  <h2 class="text-center my-4 fw-bold">å•†å“ç·¨é›†ãƒšãƒ¼ã‚¸</h2>

  <!-- ğŸ” æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  -->
  <form method="get" class="mb-4">
    <div class="input-group">
      <input type="text" class="form-control" name="keyword" placeholder="å•†å“åã‚„ã‚«ãƒ¼ãƒ‰IDã§æ¤œç´¢" value="{{ keyword }}">
      <button type="submit" class="btn btn-outline-primary">æ¤œç´¢</button>
    </div>
  </form>

  <form method="post">

    <!-- ğŸ”¼ ä¸Šéƒ¨ãƒœã‚¿ãƒ³ -->
    <div class="text-center mb-4">
      <button type="submit" class="btn btn-success me-2">ä¿å­˜</button>
      <a href="{{ url_for('index') }}" class="btn btn-secondary">æˆ»ã‚‹</a>
    </div>

    <!-- ğŸ”¼ æ–°è¦è¿½åŠ  -->
    <div class="mb-4">
      <h4 class="fw-bold mb-3">æ–°ã—ã„å•†å“ã‚’è¿½åŠ </h4>
      <div class="row g-2">
        <div class="col-md-3">
          <input type="text" class="form-control" name="add_name" placeholder="åå‰">
        </div>
        <div class="col-md-3">
          <input type="text" class="form-control" name="add_card_id" placeholder="ã‚«ãƒ¼ãƒ‰ID">
        </div>
        <div class="col-md-3">
          <input type="text" class="form-control" name="add_rare" placeholder="ãƒ¬ã‚¢ãƒªãƒ†ã‚£">
        </div>
        <div class="col-md-3">
          <input type="number" class="form-control" name="add_stock" placeholder="åœ¨åº«æ•°" min="0">
        </div>
      </div>
    </div>

    <!-- ç·¨é›†ãƒ†ãƒ¼ãƒ–ãƒ« -->
    <div class="table-responsive mb-4">
      <table class="table table-bordered table-striped align-middle">
        <thead class="table-light text-center">
          <tr>
            <th>åå‰</th>
            <th>ã‚«ãƒ¼ãƒ‰ID</th>
            <th>ãƒ¬ã‚¢ãƒªãƒ†ã‚£</th>
            <th>åœ¨åº«</th>
            <th>å‰Šé™¤</th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
          <tr>
            <td><input type="text" class="form-control" name="name_{{ loop.index0 }}" value="{{ item['name'] }}"></td>
            <td><input type="text" class="form-control" name="card_id_{{ loop.index0 }}" value="{{ item['card_id'] }}"></td>
            <td><input type="text" class="form-control" name="rare_{{ loop.index0 }}" value="{{ item['rare'] }}"></td>
            <td><input type="number" class="form-control" name="stock_{{ loop.index0 }}" value="{{ item['stock'] }}" min="0"></td>
            <td class="text-center">
              <input type="checkbox" name="delete_{{ loop.index0 }}"> å‰Šé™¤
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <input type="hidden" name="total_rows" value="{{ items|length }}">

    <!-- ğŸ”½ ä¸‹éƒ¨ãƒœã‚¿ãƒ³ -->
    <div class="text-center mt-4">
      <button type="submit" class="btn btn-success me-2">ä¿å­˜</button>
      <a href="{{ url_for('index') }}" class="btn btn-secondary">æˆ»ã‚‹</a>
    </div>
  </form>
</div>

<!-- ğŸ” ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹ãƒœã‚¿ãƒ³ -->
<button onclick="scrollToTop()" id="topBtn" title="ãƒšãƒ¼ã‚¸ãƒˆãƒƒãƒ—ã¸">â†‘</button>

<style>
  #topBtn {
    position: fixed;
    bottom: 30px;
    right: 20px;
    z-index: 100;
    background-color: #0d6efd;
    color: white;
    border: none;
    padding: 10px 15px;
    border-radius: 50%;
    font-size: 18px;
    cursor: pointer;
    display: none;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
  }
  #topBtn:hover {
    background-color: #0b5ed7;
  }
</style>

<script>
  window.onscroll = function () {
    document.getElementById("topBtn").style.display = window.scrollY > 300 ? "block" : "none";
  };
  function scrollToTop() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }
</script>
{% endblock %}
